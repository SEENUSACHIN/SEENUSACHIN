<div class="modal fade" id="uploadVideo" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Upload Video</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" id="closebutton" #closebutton aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div style="text-align:center">
          <video [src]="url" *ngIf="url" height="200" controls></video> <br/>
        </div>
        <form>
          <div class="col-md-12 form-group">
            <input type='file' accept="video/*" (change)="onSelectFile($event)" class="form-control" id="inputGroupFile04" aria-describedby="inputGroupFileAddon04" aria-label="Upload"/>
          </div>
        </form>
        <form *ngIf="url" [formGroup]="videoForm">
          <div *ngIf="errorShow!=''" class="alert alert-danger">
            <div>
              {{errorShow}}
            </div>
          </div>
          <div class="col-md-12 form-group">
            <label>Select Playlist</label>
            <select class="form-select" aria-label="Default select example" formControlName="playListName">
              <option  *ngFor="let c of playLists" [value]="c['id']">{{c['snippet']['title']}}</option>
            </select>
          </div>
          <div class="col-md-12 form-group">
            <label>Title of video</label>
            <input class="form-control" formControlName="title" type="text" name="title" placeholder="Title">
          </div>
          <div class="col-md-12 form-group">
            <label>Description of video(optional)</label>
            <textarea class="form-control" placeholder="Description" formControlName="description"></textarea>
          </div>
          <div *ngIf="percentageUpload > 0" class="col-md-12 form-group">
            <div class="progress">
              <div class="progress-bar progress-bar-warning"  role="progressbar" aria-valuemin="0" aria-valuemax="100" [style]="'width:' + percentageUpload + '%'">
                {{percentageUpload}}%
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" [disabled]="url!=undefined && url!=null ? false : true" class="btn btn-primary" (click)="onSubmit()" >
          <span *ngIf="loading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
          Upload
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="createPlaylist" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Create Playlist</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" id="closebuttonPlaylist"  aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="playListForm">
          <div *ngIf="errorShow!=''" class="alert alert-danger">
            <div>
              {{errorShow}}
            </div>
          </div>
          <div class="col-md-12 form-group">
            <label>Playlist Name</label>
            <input class="form-control" formControlName="playListName" type="text" name="title" placeholder="Enter Playlist Name">
          </div>
          <div class="col-md-12 form-group">
            <label>Description of playlist(optional)</label>
            <textarea class="form-control" placeholder="Description" formControlName="description"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="onCreatePlaylistSubmit()" >
          <span *ngIf="loading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
          Create
        </button>

      </div>
    </div>
  </div>
</div>

<body id="page-top">
  <div id="wrapper">
    <app-sidebar activiTab="youtube"></app-sidebar>
    <div id="content-wrapper" class="d-flex flex-column">
      <div id="content">
        <app-header header="Youtube"></app-header>
        <div class="container-fluid">
          <button [hidden]="true" (click)="getPlaylist()" id="getPlaylistid"></button>
          <div *ngIf="youtubeService.currentUser != null && (youtubeService.signedIn)" class="d-flex  flex-row justify-content-between">
            <label>Your Connected Account is: <strong>{{youtubeService.currentUser}}</strong></label>
            <div class="d-flex flex-row">
              <a class="nav-link" style="color:rgb(60, 124, 196)"  id="uploadVideo" target="_blank" (click)="youtubeService.signIn()">Change account</a>
              <button class="btn btn-primary btn-sm" data-bs-toggle="modal"  type="button" data-bs-target="#createPlaylist">Create Playlist</button> &nbsp;
              <button class="btn btn-primary btn-sm" data-bs-toggle="modal"  type="button" data-bs-target="#uploadVideo">Upload Video</button>
            </div>
          </div>
          <div *ngIf="!(youtubeService.signedIn)" style="text-align:center" class="">
            <h5 style="color: black;">Please re(Connect) your Youtube Account</h5>
            <button (click)="this.youtubeService.signIn()" id="uploadVideo" class="btn btn-primary">Sign In</button>
          </div>
          <div *ngIf="youtubeService.currentUser != null && (youtubeService.signedIn)">
            <h4 style="color: black;">Play Lists</h4>
            <div *ngIf="playLists.length > 0"  class="table_wrapper col-md-12" style="width: 100%;">
              <table class="table table-borderless align-middle">
                <thead class="thead-light">
                  <tr>
                    <th class="col-md-2">Playlist</th>
                    <th>Visibility</th>
                    <th>Last Updated</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let c of playLists" (click)="getPlaylistItem(c['id'])">
                    <td>
                      <span class="playListTitle">
                        <img [src]="c['snippet']['thumbnails']['default']['url']" width="70" height="50"/>
                        <div>
                          <label>{{c['snippet']['title']}}</label>
                          <div class="wrap">{{c['snippet']['description']}}</div>
                        </div>
                      </span>
                    </td>
                    <td>
                      <i *ngIf="c['status']['privacyStatus']=='public'" class="bi bi-eye-fill" style="color: green;"></i>
                      <i *ngIf="c['status']['privacyStatus']!='public'" class="bi bi-eye-slash-fill" style="color: grey;"></i>
                      &nbsp;{{c['status']['privacyStatus'] | titlecase}}
                    </td>
                    <td>{{c['snippet']['publishedAt'] | date}}</td>
                  </tr>
                </tbody>
              </table>
              <div class="paginationClass">
                <div class="">
                  <label>{{paginationText}} </label>
                  <button class="btn btn-light btn-sm" [disabled]="start == 0 || start == 1 ? true : false"  (click)="getPlaylist('pre')"> <i class="bi bi-chevron-left"></i> </button>
                  <button class="btn btn-light btn-sm" [disabled]="end == total ? true : false" (click)="getPlaylist('next')"> <i class="bi bi-chevron-right"></i> </button>
                </div>
              </div>
              <br>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
